python\nfrom async_openai import OpenAI\nfrom .settings import settings\n\nclient = OpenAI(api_key=settings.openai_key, timeout=30)\n\nasync def ask_gpt(prompt: str, history: list):\n msgs = history + [{\"role\":\"user\",\"content\":prompt}]\n resp = await client.chat.completions.create(model=settings.model, messages=msgs, max_tokens=512, temperature=0.8)\n return resp.choices[0].message.content.strip()\n
